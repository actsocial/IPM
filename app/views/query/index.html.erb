
<form class="form-inline" role="form">
  <div class="form-group">
    <select  id="brand-select">
    <% @brands.each do |brand|%>
        <option value="<%= brand.id %>"><%= brand.name%></option>
    <% end%>
    </select>
  </div>
  <div class="form-group">
    <input type="email" class="form-control" id="exampleInputEmail2" placeholder="input keywords">
  </div>
  <div class="form-group">
    <div class="row">
        <div class="col-lg-1">Price</div>
        <div class="col-lg-2">
         <input type="input" class="form-control" id="price_start" placeholder="">
        </div>
        <div class="col-lg-1">-</div>
        <div class="col-lg-2">
         <input type="input" class="form-control" id="price_start" placeholder="">
        </div>
    </div>
  </div>
  <div class="checkbox">
    <label>
      <input type="checkbox">Taobao
    </label>
  </div>
  <button type="submit" class="btn btn-default">Search</button>
</form>

<table id="resultTable" class="table">
	<thead>
        <tr>
            <th>Image</th>
            <th>Title</th>
            <th>Location</th>
            <th>Price</th>
            <th>Seller</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
<script>
	$(document).ready(function() {
    $('#resultTable').dataTable({
    	 "sDom": '<"div">rt<"div"lp>',
    	"bProcessing": true,
        "sAjaxSource": '/query/query.json',
        "aoColumns": [
            { "mData": "image" },
            { "mData": "title" },
            { "mData": "location" },
            { "mData": "price" },
            { "mData": "seller" },
            { "mData": "status" },
            { "mData": "action" }
        ],
        "aoColumnDefs": [
        	{
        		"mRender": function( data, type, row ) {
                    return "<img src='"+ row['image'] +"'>";
	            },
	            "aTargets": [0]
        	},
        	{
        		"mRender": function( data, type, row ) {
                    return "<a target='_blank' href='"+ row['url'] +"'>"+row['title']+"</a>";
	            },
	            "aTargets": [1]
        	}
        ],
        "fnServerParams": function ( aoData ) {
            aoData.push( { "name":"brand_id", "value": $("#brand-select").val()} );
        }
    });
    
//    $('#resultTable tbody').on('dblclick', 'tr', function () {
//    	
//    });
});
</script>
